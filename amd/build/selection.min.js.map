{"version":3,"sources":["../src/selection.js"],"names":["define","WordSelectQuestion","questionId","$","on","e","keyCode","toggleSelection","selection","iselected","hasClass","wordname","attr","hidden","document","getElementById","disabled","removeClass","removeAttr","type","style","visibility","display","value","addClass","prop","checked","init"],"mappings":"AAwBAA,OAAM,8BAAC,UAAY,CACjB,QAASC,CAAAA,CAAT,CAA6BC,CAA7B,CAAyC,CACvCC,CAAC,CAAE,IAAMD,CAAN,CAAmB,cAArB,CAAD,CAAsCE,EAAtC,CAA0C,SAA1C,CAAqD,SAAUC,CAAV,CAAa,CAEhE,GAAkB,EAAd,GAAAA,CAAC,CAACC,OAAN,CAAsB,CACpBC,CAAe,CAAEJ,CAAC,CAAE,IAAF,CAAH,CAAf,CACA,QACD,CAED,GAAkB,EAAd,GAAAE,CAAC,CAACC,OAAN,CAAsB,CACpB,QACD,CACD,QACD,CAXD,EAYAH,CAAC,CAAE,IAAMD,CAAN,CAAmB,cAArB,CAAD,CAAsCE,EAAtC,CAA0C,OAA1C,CAAmD,UAAY,CAC7DG,CAAe,CAAEJ,CAAC,CAAE,IAAF,CAAH,CAChB,CAFD,CAGD,CAED,QAASI,CAAAA,CAAT,CAA0BC,CAA1B,CAAqC,IAC/BC,CAAAA,CAAS,CAAGN,CAAC,CAAEK,CAAF,CAAD,CAAcE,QAAd,CAAwB,UAAxB,CADmB,CAE/BC,CAAQ,CAAGH,CAAS,CAACI,IAAV,CAAgB,MAAhB,CAFoB,CAG/BC,CAAM,CAAGC,QAAQ,CAACC,cAAT,CAAyBJ,CAAzB,CAHsB,CAInC,GAAe,IAAX,GAAAE,CAAM,EAAa,KAAAA,CAAM,CAACG,QAA9B,CAAiD,CAC/C,MACD,CACD,GAAI,KAAAP,CAAJ,CAAwB,CACtBD,CAAS,CAACS,WAAV,CAAuB,UAAvB,EACAT,CAAS,CAACU,UAAV,CAAsB,OAAtB,EACAV,CAAS,CAACI,IAAV,CAAgB,cAAhB,CAAgC,OAAhC,EAKAC,CAAM,CAACM,IAAP,CAAc,MAAd,CACAN,CAAM,CAACO,KAAP,CAAaC,UAAb,CAA0B,QAA1B,CACAR,CAAM,CAACO,KAAP,CAAaE,OAAb,CAAuB,MAAvB,CACAT,CAAM,CAACU,KAAP,CAAe,EAChB,CAZD,IAYO,CACLf,CAAS,CAACgB,QAAV,CAAoB,UAApB,EACAhB,CAAS,CAACiB,IAAV,CAAgB,OAAhB,CAAyB,UAAzB,EACAjB,CAAS,CAACI,IAAV,CAAgB,cAAhB,CAAgC,MAAhC,EACAC,CAAM,CAACM,IAAP,CAAc,UAAd,CACAN,CAAM,CAACU,KAAP,CAAe,IAAf,CACAV,CAAM,CAACa,OAAP,CAAiB,MAClB,CACF,CAED,MAAO,CACLC,IAAI,CAAE,cAAUzB,CAAV,CAAsB,CAC1B,GAAID,CAAAA,CAAJ,CAAwBC,CAAxB,CACD,CAHI,CAKR,CArDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the wordselect question type.\n *\n * @package    qtype_wordselect\n * @copyright  2016 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global $ */\ndefine(function () {\n  function WordSelectQuestion (questionId) {\n    $ ('#' + questionId + ' .selectable').on ('keydown', function (e) {\n      /* Space bar */\n      if (e.keyCode === 32) {\n        toggleSelection ($ (this));\n        return false;\n      }\n      /* Eat the keycode so it doesnt scroll the screen down */\n      if (e.keyCode === 32) {\n        return false;\n      }\n      return true;\n    });\n    $ ('#' + questionId + ' .selectable').on ('click', function () {\n      toggleSelection ($ (this));\n    });\n  }\n\n  function toggleSelection (selection) {\n    var iselected = $ (selection).hasClass ('selected');\n    var wordname = selection.attr ('name');\n    var hidden = document.getElementById (wordname);\n    if (hidden === null || hidden.disabled === true) {\n      return;\n    }\n    if (iselected === true) {\n      selection.removeClass ('selected');\n      selection.removeAttr ('title');\n      selection.attr ('aria-checked', 'false');\n      /* Convert type to text, because\n      * unchecked textboxes would not\n      * be included in the response\n      */\n      hidden.type = 'text';\n      hidden.style.visibility = 'hidden';\n      hidden.style.display = 'none';\n      hidden.value = '';\n    } else {\n      selection.addClass ('selected');\n      selection.prop ('title', 'selected');\n      selection.attr ('aria-checked', 'true');\n      hidden.type = 'checkbox';\n      hidden.value = 'on';\n      hidden.checked = 'true';\n    }\n  }\n\n  return {\n    init: function (questionId) {\n      new WordSelectQuestion (questionId);\n    },\n  };\n});\n"],"file":"selection.min.js"}